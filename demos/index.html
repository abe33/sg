<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js" type='text/javascript'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/languages/twig.min.js" type='text/javascript'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/languages/javascript.min.js" type='text/javascript'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/languages/scss.min.js" type='text/javascript'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.6.0/marked.min.js" type='text/javascript'></script>
  </head>

  <body>

    <template id="right-col-sample">
      <table border="1">
        <tr><td colspan="2"><slot name="header"></slot></td></tr>
        <tr>
          <td><slot name="left-col"></slot></td>
          <td><slot name="right-col"></slot></td>
        </tr>
      </table>

    </template>

    <template id="sg-src">
      <pre><code></code></pre>
      <script type="text/javascript">
        const lang = currentHost.getAttribute('lang') || 'html';
        const code = currentRoot.querySelector('code');

        code.innerHTML = hljs.highlight(lang, currentHost.innerHTML.trim()).value;
      </script>
    </template>

    <template id="sg-text">
      <div class="marked"></div>
      <script type="text/javascript">
        const code = currentRoot.querySelector('.marked');
        let source = currentHost.innerHTML;
        const match = source.match(/^[\n]*(\s+)/);

        if (match) {
          const [, baseIndent] = match;
          source = source.replace(new RegExp(`^${baseIndent}`, 'gm'), '');
        }

        code.innerHTML = marked(source);
      </script>
    </template>

    <sg-item>
      ### Some Button Example

      This is a small example of a styleguide item with simple markdown description as well as a code sample in plain text and the remaining content as sample.

      ```js
      function foo () {
        return 'foo';
      }
      ```

      <button>Some text</button>
    </sg-item>

    <sg-item template="right-col-sample">
      <sg-text slot="header">### Some title for a heavy setup</sg-text>
      <sg-sample slot="right-col"><button>Some text</button></sg-sample>
      <sg-text slot="left-col">
        A longer example using a custom template and slots to place the content in different cells of a table. This time each components are explictely defined and assigned a `slot`.
      </sg-text>
      <sg-src lang="html" slot="left-col">
        <button>Some text</button>
      </sg-src>
    </sg-item>

    <script type="text/javascript" src="../lib/index.js"></script>
  </body>
</html>
