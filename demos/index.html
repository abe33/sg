<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <script type="text/javascript" src="../lib/index.js" defer></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js" type='text/javascript'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/languages/twig.min.js" type='text/javascript'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/languages/javascript.min.js" type='text/javascript'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/languages/scss.min.js" type='text/javascript'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.6.0/marked.min.js" type='text/javascript'></script>

    <link href="//db.onlinewebfonts.com/c/0a47d822ebef476322ae0428f93d4e89?family=Redacted" rel="stylesheet" type="text/css"/>

    <style type="text/css">
      button {
        appearance: none;
        font-size: 1.2em;
        background: lightslategray;
        border: 1px solid slategray;
        padding: 0.2em 0.6em;
      }
      sg-preview {
        display: inline-block;
        vertical-align: middle;
        position: absolute;
        top: 50%;
        left: 5px;
        transform: translate(0, -50%);
      }
      sg-preview svg {
        max-height: 32px;
        max-width: 32px;
      }
      sg-preview * {
        font-family: 'Redacted';
      }
    </style>
  </head>

  <body>

    <template id="right-col-sample">
      <style>
        td[colspan] {
          height: 32px;
          position: relative;
          padding-left: 42px;
        }
      </style>
      <table border="1">
        <tr><td colspan="2"><slot name="header"></slot></td></tr>
        <tr>
          <td><slot name="left-col"></slot></td>
          <td><slot name="right-col"></slot></td>
        </tr>
      </table>

        <sg-script>
          const preview = currentHost.getPreview();
          preview.setAttribute('slot','header');
          currentHost.appendChild(preview);
        </sg-script>
    </template>

    <template id="sg-src">
      <pre><code></code></pre>
      <sg-script type="text/javascript">
        const lang = currentHost.getAttribute('lang') || 'html';
        const code = currentRoot.querySelector('code');

        code.innerHTML = hljs.highlight(lang, currentHost.innerHTML.trim()).value;
      </sg-script>
    </template>

    <template id="sg-text">
      <style type="text/css">
        h3 {
          margin: 0;
        }
      </style>
      <div class="marked"></div>
      <sg-script type="text/javascript">
        const code = currentRoot.querySelector('.marked');
        let source = currentHost.innerHTML;
        const match = source.match(/^[\n]*(\s+)/);

        if (match) {
          const [, baseIndent] = match;
          source = source.replace(new RegExp(`^${baseIndent}`, 'gm'), '');
        }

        code.innerHTML = marked(source);
      </sg-script>
    </template>

    <sg-item>
      ### Some Button Example

      This is a small example of a styleguide item with simple markdown description as well as a code sample in plain text and the remaining content as sample.

      ```js
      function foo () {
        return 'foo';
      }
      ```

      <button>Some text</button>
    </sg-item>

    <sg-group template="right-col-sample" samples-slot="right-col" texts-slot="left-col" sources-slot="left-col">
      <sg-item>
        ### Some Button Example

        This is a small example of a styleguide item with simple markdown description as well as a code sample in plain text and the remaining content as sample.

        ```js
        function foo () {
          return 'foo';
        }
        ```

        <button>Some text</button>
      </sg-item>

      <sg-item>
        <sg-text slot="header">### Some title for a heavy setup</sg-text>
        <sg-sample slot="right-col">
          <p>lorem ipsum dolores</p>
          <button>Some text</button>
        </sg-sample>
        <sg-text slot="left-col">
          A longer example using a custom template and slots to place the content in different cells of a table. This time each components are explictely defined and assigned a `slot`.
        </sg-text>
        <sg-src lang="html" slot="left-col">
          <button>Some text</button>
        </sg-src>
      </sg-item>
    </sg-group>

  </body>
</html>
